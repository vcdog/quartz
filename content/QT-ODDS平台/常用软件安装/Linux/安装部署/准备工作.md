

---
title: "GitLab Documentation"
description: "How to use GitLab effectively"
author: "Your Name"
date: "2023-08-09"
---


主要说明如何在Linux操作系统上安装部署，分为单机环境和集群环境，默认的安装目录为：/hos

以下以CentOS Linux release 7.9.2009版本系统为例的操作流程，其他系统根据实际版本不同可能有所区别。

## [环境准备](http://114.242.246.250:8036/linux/install/preparation.html#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87)

### [硬件环境](http://114.242.246.250:8036/linux/install/preparation.html#%E7%A1%AC%E4%BB%B6%E7%8E%AF%E5%A2%83)

以下是初步的硬件资源需求，实际项目根据客户能够提供的服务器资源，以及使用场景（用户量、并发访问量等）选择和规划具体的硬件配置。

#### [单机部署](http://114.242.246.250:8036/linux/install/preparation.html#%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2)

单台服务器的配置需求： CPU8核，内存32GB，硬盘500GB。

#### [集群部署](http://114.242.246.250:8036/linux/install/preparation.html#%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2)

|系统|服务器配置|数量|备注|
|---|---|---|---|
|负载均衡/应用前端服务|CPU8核，内存16GB，硬盘200GB|2|nginx，keepalived，前端服务|
|应用后端服务|CPU8核，内存16GB，硬盘200GB|2|java|
|数据库服务|CPU8核，内存16GB，硬盘200GB|2|mysql主从|
|缓存服务|CPU8核，内存16GB，硬盘200GB|3|redis集群，三主三从|
|文件存储服务|CPU8核，内存16GB，硬盘200GB|2|minio，4节点集群，可以和其他服务共享服务器|

### [操作系统](http://114.242.246.250:8036/linux/install/preparation.html#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F)

#### [操作系统需求](http://114.242.246.250:8036/linux/install/preparation.html#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%9C%80%E6%B1%82)

建议且经过兼容验证的操作系统如下：

- RedHat Enterprise Linux 7.9 x64
- CentOS Linux 7.9 x64
- 统信UOS V20
- 银河麒麟Kylin Server V10

查看系统版本命令：

```
cat /etc/os-release

cat /etc/redhat-release
```

如果使用其他Linux发行版，安装包和安装配置流程可能不同，需要根据实际系统版本调整。

#### [操作系统基础配置](http://114.242.246.250:8036/linux/install/preparation.html#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE)

以RedHat/CentOS系统为例，说明在客户提供服务器后，我们需要对操作系统做的一些基础配置：

1.关闭selinux

```
# 通过命令临时禁用 SELinux
setenforce 0

# 修改配置文件，永久关闭
sed -i 's/^SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config
```

2.关闭防火墙，或根据规划情况配置防火墙策略

```
systemctl stop firewalld
systemctl disable firewalld
```

3.硬盘分区挂载

- 一般提供的服务器包含系统盘和数据盘。
- 如果医院没有挂载数据盘，则我们需要需要对其进行分区/格式化/挂载。
- 挂载目录建议为/hos，所有的安装都在该目录下，并配置开机自动挂载/etc/fstab。操作流程如下：

```
#创建挂载目录：
mkdir /hos
#查看分区挂载情况
lsblk
```

![img.png](http://114.242.246.250:8036/assets/mount-CrrTNEw-.png)

其中/dev/sda是系统盘，不需要处理；/dev/sdb（有的系统可能是vdb）是数据盘，如果医院没有提前挂载好，则需要我们处理下。

```
#开始对数据盘分区
fdisk /dev/sdb

#然后输入n一直回车即可，新建分区。最后输入w保存。

#格式化
mkfs.xfs /dev/sdb1

#配置开机自动挂载，编辑/etc/fstab，在最后增加一行以下内容：
/dev/sdb1  /hos              xfs    defaults       0 0

#执行挂载
mount -a
```

4.hosts文件配置 因为部分应用使用HostNameUtil这个工具获取ip地址，需要主机名与ip地址的映射，否则会保UnknownHostException的异常。具体方法如下：

```
#1.查看主机名
hostname

#2.如果主机名不是localhost，需要编辑/etc/hosts添加映射，在第一行最后添加主机名，示例如果主机名为hos125
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 hos125
```

![img.png](http://114.242.246.250:8036/assets/hosts-0iyNhkeX.png)